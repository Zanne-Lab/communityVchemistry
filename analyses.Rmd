---
title: "analyses"
author: "Marissa Lee"
date: "10/18/2017"
output: github_document
---

```{r,message=FALSE}
source("code/load_fxns.R")
library(dplyr)
library(ggplot2)
library(readr)
library(vegan)
```

```{r setup, message=FALSE}
knitr::opts_chunk$set(echo = TRUE)

##########
#load harvest data

#initial mass
initial_mass <- read_in_initial_mass()
ggplot(initial_mass,aes(y=totalSampleDryMass,x=Species,fill=size))+geom_violin()+ theme(axis.text.x=element_text(angle=90,hjust=1)) + scale_y_log10()

# one missing value: covar.small[covar.small$unique == 'basp3l', ]

#mass at harvests
harvest_data<-LoadHarvestFiles()
harvest_data1<-CalcTotalDryMass(harvest_data)
harvest_data2<-CalcDensity(harvest_data1)
harvest_mass<-ReorgDataFrame(harvest_data2)

#create a complete sample mass df for all time points
mass.data<-rbind(initial_mass, harvest_mass)
ggplot(mass.data, aes(x=time, y=totalSampleDryMass)) + geom_point() #funky outlier
mass.data[which.max(mass.data$totalSampleDryMass),]
data[194, ]; data[194, 'dryMassCalc'] <- NA; data[194, ]  # 'mede3g': >20g mass removed during drilling, entries match original datasheet, error unknown
  data[165, ]; data[165, 'notes'] <- 'drilledWeight and dryMass do not include fallen bark'; data[165, ]  # 'LEPA13': >7g mass removed between pre- and post-drilling weights
  

#calculate %mass remaining at each time step


##########
#load initial wood trait data


##########
#load initial fungal community



```




