---
title: "Initial community and wood distances versus decay parameter distances"
author: "Marissa Lee"
date: "10/26/2017"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE)

#libraries
devtools::install_github("cornwell-lab-unsw/litterfitter")
library(dplyr)
library(ggplot2)
library(readr)
library(vegan)
library(knitr)
library(litterfitter)
library(magrittr)
library(tidyr)
library(gridExtra)

#fxns
source("load_fxns.R")
source("curve_fitting_fxns.R")
source("distance_fxns.R")

#load sample info
stemSamples<-read.csv("../derived_data/stemSamples.csv", row.names=1)

#load microbial community
comm.otu<-read.csv("../derived_data/comm_otu.csv", row.names=1, stringsAsFactors = FALSE)
seqSamples<-read.csv("../derived_data/seqSamples.csv", row.names=1, stringsAsFactors = FALSE)

#load wood trait data
traits.mean<-read.csv("../derived_data/traits_mean.csv", row.names=1, stringsAsFactors = FALSE)

#fit decay trajectories
#spdf <- fit_all_curves(plotting_df) #this recalculates all the curve fits, uncomment if the data changes
#write_csv(spdf,"derived_data/mass_loss_parameters.csv")
spdf <- read_csv("../derived_data/mass_loss_parameters.csv")
indx<-select(stemSamples, code, species, size)
spdf<-left_join(spdf, indx) #add code

```

### Plot microbial community distances vs decay param distances between species+size

Community composition, bray
```{r}
pList<-Make_commDistvDist_Fig(distType="bray", valueCol_vec=c("ne.r2","k","alpha"), seqSamples, stemSamples, comm.otu, spdf)
grid.arrange(pList[['ne.r2']], pList[['k']], pList[['alpha']])
```

Community composition, jaccard
```{r}
pList<-Make_commDistvDist_Fig(distType="jaccard", valueCol_vec=c("ne.r2","k","alpha"), seqSamples, stemSamples, comm.otu, spdf)
grid.arrange(pList[['ne.r2']], pList[['k']], pList[['alpha']])
```

Richness
```{r}
pList<-Make_commDistvDist_Fig(distType="richness", valueCol_vec=c("ne.r2","k","alpha"), seqSamples, stemSamples, comm.otu, spdf)
grid.arrange(pList[['ne.r2']], pList[['k']], pList[['alpha']])
```

Not a lot of information in initial mean microbial composition distance (bray or jaccard) about differences in species+size decay trajectories (communities are all really dissimilar). Likewise, richness is not useful.



### Plot wood trait distances vs decay param distances between species+size
```{r}
pList<-Make_woodTraitDistvDist_Fig(valueCol_vec=c("ne.r2","k","alpha"), seqSamples, stemSamples, traits.mean, spdf)
grid.arrange(pList[['ne.r2']], pList[['k']], pList[['alpha']])
```

Seems like there is more information in inital wood trait distance about species+size decay trajectories than there is in the initial community composition/richness

