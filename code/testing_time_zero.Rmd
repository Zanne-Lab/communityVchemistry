---
title: "Testing t=0 points to non-linear decomposition curve fits"
date: "10/23/2017"
output: github_document
---


## Testing effects of t=0 points
replotting the last example without the t=0 points
```{r}

devtools::install_github("cornwell-lab-unsw/litterfitter")
library(dplyr)
library(litterfitter)
library(magrittr)
library(ggplot2)
plotting_df<-read.csv("../derived_data/plotting_df.csv")
plotting_df %>%
  filter(SpeciesCode=="ripi",size=="small",time>0) ->out

plot_multiple_fits(time = out$time/12,
                   mass.remaining = out$pmr,
                   bty = 'n', model = c('neg.exp', 'weibull'),
                   xlab = 'Time', ylab = 'Proportion mass remaining',iters=1000)


# #Here is an example where the neg.exp and the weibull curves are almost identical
# plotting_df %>%
#   filter(SpeciesCode=="eute",size=="small")  ->one_example
# plot_multiple_fits(time = one_example$time/12,
#                    mass.remaining = one_example$pmr,
#                    bty = 'n', model = c('neg.exp', 'weibull'),
#                    xlab = 'Time', ylab = 'Proportion mass remaining',iters=1000)
# #and one where they are pretty different:
# plotting_df %>%
#   filter(SpeciesCode=="ripi",size=="small") -> another_example
# plot_multiple_fits(time = another_example$time/12,
#                    mass.remaining = another_example$pmr,
#                    bty = 'n', model = c('neg.exp', 'weibull'),
#                    xlab = 'Time', ylab = 'Proportion mass remaining',iters=1000)

```
Checking that the fits are the same for weibull which they are 
```{r}

out%$%
fit_litter(time = time/12, 
        mass.remaining = pmr, model = c("weibull"), iters = 1000) ->plot_1
print(plot_1)
plot(plot_1)

#why filtering for ripi small?

plotting_df %>%
  filter(SpeciesCode=="ripi",size=="small") ->out
out%$%
fit_litter(time = time/12, 
        mass.remaining = pmr, model = c("weibull"), iters = 1000) ->plot_2
print(plot_2)
plot(plot_2)
```
Including t=0 points affects the liklihood and the model selection criteria, but the curve fits are identical with this formulation.  Excluding the t=0 fits has an effect of prefering simpler models, which is the same effect as increasing the penalty for model complexity.  
